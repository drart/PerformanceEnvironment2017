<!DOCTYPE html>
<head>
  <title>Nexus + Flocking</title>
  <script src="../node_modules/nexusui/dist/NexusUI.js"></script>
  <script src="../node_modules/flocking/dist/flocking-all.min.js"></script>
</head>

<body>

  <div id="meter"></div>
  <div id="button1"></div>

      <!--
  <canvas nx="multitouch"></canvas>
  <canvas nx="tilt"></canvas> 
	
attach this to myos?  
  <canvas nx="multislider"></canvas>

  <canvas nx="waveform" style="width:900px;height:100px;display:block;margin:10px auto 0px"></canvas>

  <canvas nx="envelope"></canvas>

  <canvas nx="waveform"></canvas>
  -->

  <script>

      flock.init();
      //var as = flock.webAudio.audioSystem.audioContextSingleton;
      //var as = flock.environment.audioSystem.context;
      var as = flock.enviro.shared.audioSystem.context;


      var synth = flock.synth({
          synthDef: {
              ugen: "flock.ugen.filter.biquad.hp",
              freq: {
                  ugen: "flock.ugen.sin",
                  rate: "control",
                  freq: {
                      ugen: "flock.ugen.xLine",
                      rate: "control",
                      start: 0.7,
                      end: 300,
                      duration: 20
                  },
                  phase: 0,
                  mul: 3600,
                  add: 4000
              },
              source: {
                  ugen: "flock.ugen.lfSaw",
                  freq: 200,
                  mul: 0.1
              }
          }
      });

      Nexus.context = as;
      //var flockgain = flock.environment.audioSystem.context.createGain()
      var meter = new Nexus.Meter("#meter");
      meter.connect(as.destination, 2);
      var but = new Nexus.Button("#button1");

  </script>
</body>
</html>
