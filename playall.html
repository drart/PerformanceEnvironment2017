<!DOCTYPE html>
<head>
    <title>Trigger sounds</title>
</head>
<body>
    <script src="node_modules/flocking/dist/flocking-all.js"></script>
    <script>
        flock.init();
        
        fluid.defaults("adam.bufferPlayingSynth", {
            gradeNames: "flock.synth",
            bufferUrl: "fluid.mustBeOverridden",
            synthDef: {
                id: "mysample",
                ugen: "flock.ugen.playBuffer",
                buffer: {
                    url: "{that}.options.bufferUrl"
                },
                loop: 1,
                start: 0,
                end: 1,
                mul: 0
            },
            model: {
                fadein: {
                    ugen: "flock.ugen.line",
                    start: 0, 
                    end: 1, 
                    duration: 30
                },
                fadeout: {
                    ugen: "flock.ugen.line",
                    start: 1, 
                    end: 0, 
                    duration: 30
                }
            },
            invokers: {
                fadein: {
                    func: "{that}.set",
                    args: ["mysample.mul",  "{that}.model.fadein"]
                },
                fadeout: {
                    func: "{that}.set",
                    args: ["mysample.mul",  "{that}.model.fadeout"]
                }
            }
        });

        fluid.defaults("adam.bufferBand", {
            gradeNames: "flock.band",
            components: {
                grandrone: {
                    type: "adam.bufferPlayingSynth",
                    options: {
                        bufferUrl: "grandrone.wav"
                    }
                },
                freezer: {
                    type: "adam.bufferPlayingSynth",
                    options: {
                        bufferUrl: "freezer.wav"
                    }
                },
                newdrone: {
                    type: "adam.bufferPlayingSynth", 
                    options: {
                        bufferUrl: "newdrone.wav"
                    }
                },
                cymbal: {
                    type: "adam.bufferPlayingSynth", 
                    options: {
                        bufferUrl: "cymballike.wav"
                    }
                }
            }

        });

        var bigband = adam.bufferBand();

        flock.enviro.shared.play();
    </script>
</body>
</html>
